<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suporte TopStyle</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/support-chat.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css">
</head>

<body>
    <div id="client-chat-container" class="client-chat-container">

        <header class="chat-header">
            <div class="chat-avatar-support">
                <img src="https://i.ibb.co/jPt43z3L/logo-background.png" alt="Suporte">
            </div>
            <div>
                <h3>Suporte TopStyle</h3>
                <p>Online agora</p>
            </div>
            <a href="#" onclick="goBackOrHome(event)" class="btn-close-chat" title="Voltar">
                <i class="ri-close-line"></i>
            </a>
        </header>

        <main class="chat-messages-area" id="messages-area">
        </main>

        <div class="chat-suggestions" id="chat-suggestions" style="display:none;">
            <button class="chip" onclick="sendSuggestion('游닍 Onde est치 meu pedido?')">游닍 Onde est치 meu pedido?</button>
            <button class="chip" onclick="sendSuggestion('游눶 Quero solicitar reembolso')">游눶 Reembolso</button>
            <button class="chip" onclick="sendSuggestion('游뛂 Por que fui banido?')">游뛂 Motivo de banimento</button>
            <button class="chip" onclick="sendSuggestion('游늺 D칰vida sobre tamanhos')">游늺 Tamanhos</button>
            <button class="chip" onclick="sendSuggestion('游뚴 Valor do frete')">游뚴 Valor do frete</button>
        </div>

        <footer class="chat-input-area">
            <form id="chat-form" class="chat-form">
                <input type="text" id="message-input" placeholder="Digite sua mensagem..." autocomplete="off">
                <button type="submit"><i class="ri-send-plane-fill"></i></button>
            </form>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <script type="module" src="assets/js/supabase-client.js"></script>
    <script src="assets/js/support-chat.js"></script>
    <script>
        function goBackOrHome(e) {
            e.preventDefault();
            // Verifica se h치 hist칩rico para voltar dentro do mesmo dom칤nio
            if (document.referrer && document.referrer.indexOf(window.location.host) !== -1) {
                history.back();
            } else {
                // Se n칚o houver hist칩rico seguro, vai para a home
                window.location.href = 'index.html';
            }
        }
    </script>
    <script src="assets/js/error-logger.js"></script>
</body>

</html>